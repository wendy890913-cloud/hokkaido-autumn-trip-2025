<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<title>2025.10.19ï½2025.10.24 åŒ—æµ·é“ç§‹æ—¥è‡ªç”±è¡Œï¼ˆå¯å®‰è£ PWAï¼‰</title>

<!-- PWA manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#D98C59">

<style>
  :root{--leaf:#C65A3C;--accent:#D98C59;--bg:#FFF8F0;--card:#fff;--text:#222;--muted:#666}
  html,body{height:100%;margin:0;background:var(--bg);font-family:"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;color:var(--text)}
  .app{min-height:100vh;display:flex;flex-direction:column}
  .topbar{display:flex;align-items:center;gap:10px;padding:12px;background:linear-gradient(90deg,rgba(198,90,60,0.06),transparent)}
  .logo{width:46px;height:46px;border-radius:8px;background:linear-gradient(135deg,var(--leaf),var(--accent));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800}
  .title{font-weight:800;font-size:15px}
  .subtitle{font-size:12px;color:var(--muted)}
  .navthumbs{display:flex;gap:8px;overflow:auto;padding:8px 12px;background:rgba(255,255,255,0.6)}
  .thumb{min-width:80px;padding:8px;border-radius:8px;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,0.06);text-align:center;font-size:12px;color:var(--muted);cursor:pointer}
  .thumb.active{border:2px solid var(--leaf);color:var(--leaf);font-weight:700}
  .viewport{flex:1;position:relative;overflow:hidden}
  .slider{display:flex;height:100%;transition:transform .32s ease}
  .page{min-width:100%;box-sizing:border-box;padding:16px;overflow:auto}
  .card{background:var(--card);border-radius:10px;padding:12px;box-shadow:0 8px 24px rgba(0,0,0,0.06)}
  h2{margin:0;color:var(--leaf);font-size:16px}
  .slogan{color:var(--accent);font-size:12px;margin-top:6px}
  .timeline{margin-top:10px}
  .row{display:flex;gap:10px;align-items:flex-start;margin-bottom:8px}
  .time{width:76px;font-weight:700;color:var(--accent);font-size:13px}
  .desc{flex:1;font-size:14px;line-height:1.45}
  .res{margin-top:8px;padding:8px;background:linear-gradient(90deg, rgba(217,140,89,0.04), rgba(198,90,60,0.02));border-radius:8px}
  .res .name{font-weight:700;color:var(--leaf)}
  .res .info{font-size:12px;color:var(--muted);margin-top:4px}
  .notes{margin-top:10px;border:1px dashed rgba(0,0,0,0.08);padding:8px;border-radius:8px;background:#fff;min-height:120px}
  .footer{padding:10px;text-align:center;font-size:12px;color:var(--muted)}
  .controls{position:fixed;left:12px;right:12px;bottom:12px;display:flex;justify-content:space-between;pointer-events:none}
  .btn{pointer-events:auto;background:var(--leaf);color:#fff;padding:8px 12px;border-radius:30px;box-shadow:0 6px 18px rgba(198,90,60,0.12);font-weight:700;border:none}
  .smallbtn{background:rgba(0,0,0,0.06);color:var(--leaf);padding:6px 10px;border-radius:20px;font-weight:700;border:none}
  .installPrompt{display:flex;gap:8px;align-items:center}
  @media (min-width:600px){ .page{padding:20px} .thumb{min-width:110px} }
</style>
</head>
<body>
<div class="app" id="app">
  <div class="topbar">
    <div class="logo">HOK</div>
    <div style="flex:1">
      <div class="title">2025.10.19ï½2025.10.24 åŒ—æµ·é“ç§‹æ—¥è‡ªç”±è¡Œ</div>
      <div class="subtitle">For AiHua &amp; Mom Â· å¯é›¢ç·šç­†è¨˜ &amp; å®‰è£</div>
    </div>
    <div id="installArea" class="installPrompt">
      <button id="installBtn" class="smallbtn" style="display:none">å®‰è£åˆ°ä¸»ç•«é¢</button>
      <button id="shareBtn" class="smallbtn">åˆ†äº«</button>
    </div>
  </div>

  <div class="navthumbs" id="thumbs"></div>

  <div class="viewport" id="viewport">
    <div class="slider" id="slider"></div>
    <div class="controls">
      <button class="btn" id="prevBtn" aria-label="ä¸Šä¸€é ">â—€ ä¸Šä¸€é </button>
      <button class="btn" id="nextBtn" aria-label="ä¸‹ä¸€é ">ä¸‹ä¸€é  â–¶</button>
    </div>
  </div>

  <div class="footer">å·¦å³æ»‘å‹•åˆ‡æ›é é¢ â€¢ é»ç¸®åœ–å¯å¿«é€Ÿè·³é  â€¢ ç­†è¨˜æœƒè‡ªå‹•å„²å­˜</div>
</div>

<script>
/* ========== è¡Œç¨‹è³‡æ–™ï¼ˆåŒå‰ï¼‰ ========== */
const pages = [
  { id:'day1', day:'Day 1 â€” 10/19ï¼ˆæ—¥ï¼‰', slogan:'ğŸ‚ åˆè¦‹åŒ—æµ·é“ãƒ»ç§‹é¢¨å¹èµ·åºç« ',
    items:[
      {t:'07:30', d:'æŠµé”æ–°åƒæ­²æ©Ÿå ´ï¼ˆCTSï¼‰â†’ æ­ JR å¿«é€Ÿã‚¨ã‚¢ãƒãƒ¼ãƒˆ å‰å¾€æœ­å¹Œï¼ˆç´„ 40 åˆ†ï¼‰'},
      {t:'09:30', d:'æ—©é¤ï¼šæœ­å¹Œç«™ Bakery æˆ– é£¯åº—æ—©é¤'},
      {t:'10:30â€“14:00', d:'åŒ—æµ·é“èˆŠæœ¬å»³èˆã€æœ­å¹Œæ™‚è¨ˆå°ã€å¤§é€šå…¬åœ’ã€ç‹¸å°è·¯å•†åº—è¡—ï¼ˆè¼•é¬†é€›è¡—ï¼‰'},
      {t:'16:00', d:'é£¯åº— check-in / ä¼‘æ¯'}
    ],
    restaurants:[
      {name:'æ¹¯å’–å“© GARAKU', info:'11:30â€“15:30 / 17:00â€“23:00 Â· å¤šç‚ºç¾å ´å€™ä½', recommend:'é›è…¿æ¹¯å’–å“©'},
      {name:'æ ¹å®¤èŠ±ã¾ã‚‹ï¼ˆStella Placeï¼‰', info:'11:00â€“22:00 Â· ç¾å ´ç™¼åˆ¸å€™ä½', recommend:'é®®é­šå£½å¸'}
    ],
    note:'å‚æ™šæ–¼å¤§é€šå…¬åœ’æ‹ç…§ï¼Œè¡—ç‡ˆèˆ‡æ¥“è‘‰äº¤ç¹”æœ€ç¾ã€‚'
  },
  { id:'day2', day:'Day 2 â€” 10/20ï¼ˆä¸€ï¼‰', slogan:'ğŸï¸ KLOOKï¼šç´…è‘‰èŠ±æµ·èˆ‡å±±è°·é¤æ¡Œ',
    items:[
      {t:'09:00', d:'é›†åˆå‡ºç™¼ï¼ˆKLOOK æŒ‡å®šé›†åˆåœ°ï¼Œé€šå¸¸æœ­å¹Œç«™å—å£ï¼‰'},
      {t:'10:00â€“11:30', d:'åœ‹ç‡Ÿç€§é‡éˆ´è˜­ä¸˜é™µå…¬åœ’ï¼ˆèŠ±æµ·ã€æ³¢æ³¢è‰ï¼‰'},
      {t:'12:00â€“12:50', d:'é ­å¤§ä½›æ®¿æ°´åº­ï¼ˆå®‰è—¤å¿ é›„å»ºç¯‰ï¼‰'},
      {t:'13:10â€“14:30', d:'å…«åŠå±± BBQï¼ˆæˆå‰æ€æ±—æˆ–é›œéŒ¦çƒ¤è‚‰ï¼å«åˆé¤ï¼‰'},
      {t:'15:00â€“16:15', d:'å®šå±±æ¹– / è±å¹³å³½æ°´å£©ï¼šç´…è‘‰å³½è°·æ™¯è§€'},
      {t:'16:30â€“17:00', d:'æœ­å¹Œæ¹–ï¼ˆç´…è‘‰å€’å½±æ‹ç…§ï¼‰'}
    ], restaurants:[], note:'å›ç¨‹ç´„ 17:30â€“18:30 æŠµé”æœ­å¹Œï¼ˆè¦–ç•¶æ—¥äº¤é€šèˆ‡åœç•™æ™‚é–“ç¨æœ‰æµ®å‹•ï¼‰ã€‚'
  },
  { id:'day3', day:'Day 3 â€” 10/21ï¼ˆäºŒï¼‰', slogan:'ğŸš— è‡ªé§•ãƒ»ç™»åˆ¥èˆ‡æ´çˆºæ¹–çš„ç§‹è‰²æ…¢è¡Œï¼ˆä¸€èˆ¬é“è·¯ï¼‰',
    items:[
      {t:'07:30', d:'æœ­å¹Œå‡ºç™¼ï¼ˆå°èˆªè¨­å®šé¿é–‹é«˜é€Ÿï¼‰'},
      {t:'10:20', d:'ç™»åˆ¥åœ°ç„è°·ï¼ˆæ­¥é“æ•£æ­¥ã€æº«æ³‰è’¸æ°£ï¼›å»ºè­°åœ 60â€“90 åˆ†ï¼‰'},
      {t:'11:30â€“12:30', d:'ç™»åˆ¥æº«æ³‰è¡—åˆé¤ï¼ˆå‘³ã®å¤§ç‹â€”åœ°ç„æ‹‰éºµï¼‰'},
      {t:'13:10â€“14:00', d:'æ²¿é“é“ 2 è™Ÿä¸€èˆ¬é“è·¯å‰å¾€æ´çˆºæ¹–ï¼ˆå¯åœå€¶å¤šæ¨‚æ¹–å±•æœ›å°ï¼‰'},
      {t:'14:10â€“15:10', d:'æ´çˆºæ¹–å±•æœ›å°ï¼ˆæ¹–æ™¯æ‹ç…§ã€æ¹–ç•”è¶³æ¹¯ï¼›Lake Hill Farm å’–å•¡ï¼‰'},
      {t:'15:20â€“16:00', d:'æ˜­å’Œæ–°å±±ï¼ˆåœ°ç†±å€ï¼Œå¯é¸ç†Šç‰§å ´ï¼‰'},
      {t:'16:10â€“18:40', d:'åœ‹é“ 230 è™Ÿï¼ˆç¶“ä¸­å±±å³ ï¼‰æ…¢è¡Œè¿”å›æœ­å¹Œï¼ˆä¸­å±±å³ æœ›ç¾Šè¹„ä¼‘æ¯ç«™ï¼‰'}
    ],
    restaurants:[{name:'å‘³ã®å¤§ç‹ï¼ˆç™»åˆ¥ï¼‰', info:'åœ°ç„æ‹‰éºµååº—ï¼›ç‡Ÿæ¥­ä¾åˆ†åº—è€Œç•°ï¼Œå»ºè­°å‡ºç™¼å‰æŸ¥è©¢', recommend:'å’–å“©æ‹‰éºµ'}],
    note:'å°èˆªè«‹è¨­å®šã€Œé¿é–‹é«˜é€Ÿã€æˆ–ã€Œä¸€èˆ¬é“è·¯å„ªå…ˆã€ï¼›å‡ºç™¼å‰åŠ æ»¿æ²¹ã€‚'
  },
  { id:'day4', day:'Day 4 â€” 10/22ï¼ˆä¸‰ï¼‰', slogan:'ğŸ¦­ KLOOKï¼šæ—­å±±å‹•ç‰©åœ’ï¼‹ç¾ç‘›ç™½é¬šç€‘å¸ƒï¼†é’æ± ',
    items:[
      {t:'08:00', d:'é›†åˆå‡ºç™¼ï¼ˆæœ­å¹Œé›†åˆï¼‰'},
      {t:'10:15â€“12:15', d:'æ—­å±±å‹•ç‰©åœ’ï¼ˆå»ºè­°åœ 2 å°æ™‚ï¼Œè§€è³ä¼éµæ•£æ­¥èˆ‡æµ·è±¹é¤¨ï¼‰'},
      {t:'12:50', d:'Ken & Mary ä¹‹æ¨¹ï¼ˆè»Šè¦½ï¼‰'},
      {t:'13:10', d:'ç™½é¬šç€‘å¸ƒï¼ˆç´„ 20 åˆ†ï¼‰'},
      {t:'13:40', d:'ç™½é‡‘é’æ± ï¼ˆBlue Pondï¼Œç´„ 20 åˆ†ï¼‰'},
      {t:'15:00', d:'æ£®æ—ç²¾éˆéœ²å°æˆ–ç”·å±±é…’é€ é¤¨ï¼ˆå­£ç¯€æ›¿ä»£ï¼‰'},
      {t:'17:30', d:'è¿”å›æœ­å¹Œ'}
    ], restaurants:[], note:'è«‹æº–å‚™ä¿æš–å¤–å¥—èˆ‡é˜²æ°´é‹ï¼›åœ’å€äººæ½®å¤šï¼Œæ³¨æ„ä¿ç®¡ç‰©å“ã€‚'
  },
  { id:'day5', day:'Day 5 â€” 10/23ï¼ˆå››ï¼‰', slogan:'ğŸ™ï¸ å°æ¨½æ•£æ­¥ãƒ»ç”œé»èˆ‡ç»ç’ƒè—è¡“',
    items:[
      {t:'08:30', d:'JR æœ­å¹Œ â†’ å°æ¨½ï¼ˆç´„ 40 åˆ†ï¼‰'},
      {t:'09:30', d:'å°æ¨½é‹æ²³ æ•£æ­¥æ‹ç…§'},
      {t:'10:30', d:'åŒ—ä¸€ç¡å­ / éŸ³æ¨‚ç›’å ‚ï¼ˆç»ç’ƒå·¥è—ã€è³¼ç‰©ï¼‰'},
      {t:'12:00', d:'ä¸‰è§’å¸‚å ´åˆé¤ï¼ˆæµ·é®®ä¸¼ï¼‰'},
      {t:'14:00â€“16:30', d:'LeTAO æœ¬åº—ï¼ˆç”œé»ï¼‰ & å ºç”ºé€šè³¼ç‰©'}
    ],
    restaurants:[{name:'LeTAOï¼ˆå°æ¨½æœ¬åº—ï¼‰', info:'9:00â€“18:00ï¼ˆå­£ç¯€è®Šå‹•ï¼‰ï¼›å¹³æ—¥å¯è©¢å•åº§ä½', recommend:'é›™å±¤èµ·å¸è›‹ç³•'}],
    note:'å°æ¨½å¤šçŸ³æ¿è·¯ï¼Œç©¿èˆ’é©é‹ï¼›ç”œé»åº—é€±æœ«äººå¤šï¼Œè«‹ææ—©æ’éšŠã€‚'
  },
  { id:'day6', day:'Day 6 â€” 10/24ï¼ˆäº”ï¼‰', slogan:'ğŸ›ï¸ æœ­å¹Œè³¼ç‰©ãƒ»ç”œé»æ”¶å°¾ã€é£›è¿”å°ç£',
    items:[
      {t:'09:00', d:'å¤§ä¸¸ç™¾è²¨ / Bic Camera / ç™½è‰²æˆ€äººå…¬åœ’ï¼ˆè³¼ç‰©ï¼‰'},
      {t:'12:00', d:'åˆé¤ï¼šæœ­å¹Œç«™ä¾¿ç•¶æˆ–æ©Ÿå ´é¤å»³'},
      {t:'12:30', d:'æ­ JR å¿«é€Ÿã‚¨ã‚¢ãƒãƒ¼ãƒˆ å‰å¾€æ–°åƒæ­²æ©Ÿå ´ï¼ˆç´„ 40 åˆ†ï¼‰'},
      {t:'14:40', d:'FD243 èµ·é£› â†’ 18:00 æŠµé”å°åŒ—'}
    ], restaurants:[], note:'å‡ºç™¼å‰å†æ¬¡ç¢ºèªèˆªç­èˆ‡æ©Ÿå ´é‚„è»Šä½ç½®ã€‚'
  }
];

/* ========== å»ºé èˆ‡ç¸®åœ– ========== */
const slider = document.getElementById('slider');
const thumbs = document.getElementById('thumbs');

function mkPage(data, idx){
  const el = document.createElement('div');
  el.className = 'page';
  el.innerHTML = `
    <div class="card" data-page="${data.id}">
      <h2>${data.day}</h2>
      <div class="slogan">${data.slogan}</div>
      <div class="timeline">
        ${data.items.map(it=>`<div class="row"><div class="time">${it.t}</div><div class="desc">${it.d}</div></div>`).join('')}
      </div>
      ${data.restaurants && data.restaurants.length ? `<div style="margin-top:10px">${data.restaurants.map(r=>`<div class="res"><div class="name">${r.name}</div><div class="info">${r.info}</div><div class="info"><strong>æ¨è–¦ï¼š</strong>${r.recommend || ''}</div></div>`).join('')}</div>` : ''}
      <div class="note" style="margin-top:10px">${data.note || ''}</div>
      <div style="margin-top:10px"><div class="notes" contenteditable="true" data-key="note-${data.id}"></div></div>
    </div>
  `;
  slider.appendChild(el);

  const thumb = document.createElement('div');
  thumb.className = 'thumb';
  thumb.innerHTML = `<div style="font-weight:700">${data.day.split(' ')[0]}</div><div style="font-size:11px;color:var(--muted)">${data.day.split('â€”')[1]}</div>`;
  thumb.addEventListener('click',()=>goTo(idx));
  thumbs.appendChild(thumb);
}
pages.forEach((p,i)=>mkPage(p,i));

let current = 0;
const pageCount = pages.length;
const thumbEls = Array.from(document.querySelectorAll('.thumb'));
thumbEls[0].classList.add('active');

function updateSlider(){
  const x = -current * 100;
  slider.style.transform = `translateX(${x}%)`;
  thumbEls.forEach((t,i)=> t.classList.toggle('active', i===current));
  window.scrollTo(0,0);
}

document.getElementById('prevBtn').addEventListener('click', ()=>{ if(current>0){current--;updateSlider();}});
document.getElementById('nextBtn').addEventListener('click', ()=>{ if(current<pageCount-1){current++;updateSlider();}});

function goTo(i){ current = i; updateSlider(); }

/* swipe */
let startX=0, startY=0, startTime=0;
const threshold=50, restraint=100, allowedTime=500;
const viewportEl=document.getElementById('viewport');
viewportEl.addEventListener('touchstart', function(e){ const t=e.changedTouches[0]; startX=t.pageX; startY=t.pageY; startTime=new Date().getTime(); }, false);
viewportEl.addEventListener('touchend', function(e){ const t=e.changedTouches[0]; const distX=t.pageX-startX, distY=t.pageY-startY, elapsed=new Date().getTime()-startTime; if(elapsed<=allowedTime && Math.abs(distX)>=threshold && Math.abs(distY)<=restraint){ if(distX>0) { if(current>0) current--; } else { if(current<pageCount-1) current++; } updateSlider(); } }, false);

/* keyboard */
document.addEventListener('keydown', e=>{ if(e.key==='ArrowLeft') { if(current>0){current--;updateSlider();}} if(e.key==='ArrowRight'){ if(current<pageCount-1){current++;updateSlider();}}});

/* ========== ç­†è¨˜ï¼ˆlocalStorageï¼‰è‡ªå‹•è¼‰å…¥èˆ‡å„²å­˜ ========== */
function loadNotes(){
  document.querySelectorAll('.notes').forEach(el=>{
    const key = el.dataset.key;
    if(!key) return;
    const val = localStorage.getItem(key);
    if(val) el.innerHTML = val;
  });
}
function saveNotes(){
  document.querySelectorAll('.notes').forEach(el=>{
    const key = el.dataset.key;
    if(!key) return;
    localStorage.setItem(key, el.innerHTML);
  });
}
/* è¼‰å…¥å·²å­˜ç­†è¨˜ */
loadNotes();
/* å®šæ™‚è‡ªå‹•ä¿å­˜ï¼ˆæ¯ 3 ç§’ï¼‰åŠé›¢é–‹æ™‚ä¿å­˜ */
setInterval(saveNotes, 3000);
window.addEventListener('beforeunload', saveNotes);

/* ä¹Ÿåœ¨ç·¨è¼¯å®Œå¾Œç«‹å³å„²å­˜ */
document.querySelectorAll('.notes').forEach(el=>{
  el.addEventListener('input', ()=> localStorage.setItem(el.dataset.key, el.innerHTML));
});

/* ========== ç°¡å–®åˆ†äº«/å®‰è£æç¤º ========== */
let deferredPrompt;
const installBtn = document.getElementById('installBtn');
window.addEventListener('beforeinstallprompt', (e)=>{
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = 'inline-block';
});
installBtn.addEventListener('click', async ()=>{
  if(!deferredPrompt) return;
  deferredPrompt.prompt();
  const choice = await deferredPrompt.userChoice;
  deferredPrompt = null;
  installBtn.style.display = 'none';
});

/* åˆ†äº« */
document.getElementById('shareBtn').addEventListener('click', ()=>{
  const txt = `2025.10.19ï½2025.10.24 åŒ—æµ·é“ç§‹æ—¥è‡ªç”±è¡Œ â€” è¡Œç¨‹å·²å„²å­˜æ–¼æ­¤æª”æ¡ˆã€‚`;
  if(navigator.share) navigator.share({title:'åŒ—æµ·é“ç§‹æ—¥è‡ªç”±è¡Œ', text:txt});
  else alert('è«‹å°‡æ­¤ HTML æª”æ¡ˆå‚³çµ¦åŒè¡Œï¼Œæˆ–å°‡é é¢åŠ å…¥ä¸»ç•«é¢ä»¥ä¾¿é›¢ç·šä½¿ç”¨ã€‚');
});

/* ========== Service worker è¨»å†Š ========== */
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('service-worker.js').then(reg=>{
    console.log('SW registered', reg);
  }).catch(err=>console.warn('SW register failed', err));
}

/* init */
updateSlider();
</script>
</body>
</html>
